<html>
<head>
  <pre id="test1"></pre>
  <pre id="test2"></pre>
  <pre id="test3"></pre>
  <pre id="test4"></pre>
  <script src="languages.js"></script>
  <script>
    function randomno(n){
      var num = Math.floor(Math.random() * n);
      return num;
    }

    function removeelem(arr, e){
      for(i= 0; i < arr.length; i++){
        if (arr[i] === e) {
            var arr1 = arr.slice(0,i);
            var arr2 = arr.slice(i+1,arr.length);
            return(arr1.concat(arr2));
        }
      }
    return(arr);
  }

    function randomq(){
      const keys = Object.keys(languages);
      var ran_key = keys[randomno(keys.length)];
      var countrieslanguages = []
      for(i=0; i<languages[ran_key]["language"].length;i++){
        var tmp = languages[ran_key]["language"][i]["name"]
        if (tmp != "unspecified"){
          countrieslanguages.push(languages[ran_key]["language"][i]["name"]);
        }
      }
      return([ran_key, countrieslanguages]);
    };

    function randomans(array){
      var ran_key = randomno(listoflanguages.length);
      var tmp = listoflanguages[ran_key];
      if(array.includes(tmp)){
        return randomans(array);
      }
      else {
        return tmp;
      };
    };

    function randomqtype(){
      var ran_key = randomno(2);
      var questiontypes = ["where", "what"]
      return(questiontypes[ran_key]);
    };

    var difficulty = ["easy", "medium", "hard"];

    var lives = 3;

    var score = 0;

    function randompos(init, ref){
      if(ref.length>0){
        position = randomno(ref.length);
        pos = init[position];
        newref = removeelem(ref, ref[position]);
        newinit = removeelem(init, pos);
        array1 = [pos];
        if(ref.length===1) {
          return(array1)
        } else {
          return (array1.concat(randompos(newinit, newref)));
        }
      }
    }

    function getquestion(){
      var array = []
      var ques = randomq()
      array.push(String(ques[1][0]))
      for(i=0; i < 4; i++){
        tmp = randomans(array);
        array.push(tmp);
      }
      return([ques[0], array]);
    };

    function replacetext(){
      console.log("blah")
      var q = getquestion();
      var country = q[0];
      var correct = q[1][0]
      var answers = randompos(q[1], [1, 2, 3, 4, 5], q[1].length)
      qtype = randomqtype();
      if(qtype=="what"){
        document.getElementById("question").innerHTML = "What language is spoken in " + country + "?"
        document.getElementById("q.a").textContent = answers[0]
        document.getElementById("q.b").textContent = answers[1]
        document.getElementById("q.c").textContent = answers[2]
        document.getElementById("q.d").textContent = answers[3]
        document.getElementById("q.e").textContent = answers[4]
      }
      if(qtype=="where"){
        document.getElementById("question").innerHTML = "(TBD) Where is " + country + " spoken?"
        document.getElementById("q.a").textContent = answers[0]
        document.getElementById("q.b").textContent = answers[1]
        document.getElementById("q.c").textContent = answers[2]
        document.getElementById("q.d").textContent = answers[3]
        document.getElementById("q.e").textContent = answers[4]
      }
      return(correct)
    };
    // need interactive elements (click, check correct, etc.)
    // need difficulty formula
    // need score formula
    // make functions idiot proof to demonstrate good coding
  </script>
</head>
<body onload="replacetext();">
<div class="center">
  <p id="demo"></p>
<p class="center" id='question'>?
  </p><br><br>
<button type="submit" class="submit" id="q.a"></button><br>
<button type="submit" class="submit" id="q.b"></button><br>
<button type="submit" class="submit" id="q.c"></button><br>
<button type="submit" class="submit" id="q.d"></button><br>
<button type="submit" class="submit" id="q.e"></button>
</div>
</body>
</html>
